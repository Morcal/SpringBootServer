<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">
    <!-- 为用户凭证添加前缀. -->
    <bean id="xl-username-prefix-modifier" class="cn.com.xinli.portal.repository.CredentialsModifierEntity">
        <property name="id" value="1"/>
        <property name="target" value="USERNAME"/>
        <property name="position" value="HEAD" />
        <property name="value" value="xl"/>
    </bean>

    <!-- 为用户凭证添加后缀. -->
    <bean id="xl-username-post-modifier" class="cn.com.xinli.portal.repository.CredentialsModifierEntity">
        <property name="id" value="1"/>
        <property name="target" value="USERNAME"/>
        <property name="position" value="TAIL" />
        <property name="value" value="@xinli.com.cn"/>
    </bean>

    <!-- 将用户凭证密码进行MD5摘要计算. -->
    <bean id="md5-password-encoder" class="cn.com.xinli.portal.repository.CredentialsEncoderEntity">
        <property name="id" value="1"/>
        <property name="algorithm" value="md5"/>
        <property name="value" value=""/>
    </bean>

    <!-- 引用前面定义的前缀/后缀以及摘要计算等. -->
    <bean id="xinli-prepost-md5" class="cn.com.xinli.portal.repository.CredentialsTranslationEntity">
        <property name="id" value="1"/>
        <property name="encoder" ref="md5-password-encoder"/>
        <property name="modifiers">
            <list>
                <ref bean="xl-username-prefix-modifier"/>
                <ref bean="xl-username-post-modifier"/>
            </list>
        </property>
    </bean>

    <!-- 定义NAS配置. -->
    <bean id="mock-huawei-nas-entity" class="cn.com.xinli.portal.repository.NasEntity">
        <property name="id" value="2"/>
        <property name="nasId" value="xinli99"/>
        <property name="name" value="mock-huawei-nas"/>
        <property name="ipv4Address" value="127.0.0.1"/>
        <property name="ipv6Address" value=""/>
        <property name="type" value="HuaweiV2"/>
        <property name="authType" value="CHAP"/>
        <property name="ipv4start" value="-1062731007"/>
        <property name="ipv4end" value="-1062730754"/>
        <property name="listenPort" value="2000"/>
        <property name="sharedSecret" value="aaa"/>
        <property name="translation" ref="xinli-prepost-md5"/>
    </bean>

    <!--
    <bean class="cn.com.xinli.portal.support.NasConfiguration">
        <property name="id" value="1"/>
        <property name="nasId" value="xinli03"/>
        <property name="name" value="xinli-h3c-vbras"/>
        <property name="ipv4Address" value="192.168.3.95"/>
        <property name="ipv6Address" value=""/>
        <property name="type" value="Huawei v2"/>
        <property name="authType" value="CHAP"/>
        <property name="ipv4start" value="192.168.3.1"/>
        <property name="ipv4end" value="192.168.3.254"/>
        <property name="listenPort" value="2000"/>
        <property name="sharedSecret" value="aaa"/>
    </bean>
    -->

    <!-- 定义NAS Mapping -->
    <bean id="nasMapping" class="cn.com.xinli.portal.support.NasMappingSupport" init-method="init">
        <property name="configured">
            <set>
                <bean class="cn.com.xinli.portal.support.NasAdapter">
                    <constructor-arg ref="mock-huawei-nas-entity"/>
                </bean>
            </set>
        </property>
    </bean>
</beans>
