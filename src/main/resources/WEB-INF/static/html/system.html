
<div class="form-group">
    <label for="private-key" class="control-label">Server Private Key</label>
    <input type="text" id="private-key"
           class="form-control" placeholder="server private key" data-toggle="tooltip" data-container="body"
           data-title="server private key can not be empty."/>
    <div class="checkbox">
        <label>
            <input type="checkbox" id="server-allow-nat">
            Allow user login in NATed environment
        </label>
    </div>

    <div class="checkbox">
        <label>
            <input type="checkbox" id="server-check-redirect-url">
            Check redirect url when connect. (If checked, server will reject user when login in NATed environment)
        </label>
    </div>
</div>

<div class="form-group">
    <div class="checkbox">
        <label>
            <input type="checkbox" id="enable-session-ttl">
            Enable session TTL. (if checked, session while be removed when TTL reached)
        </label>
    </div>
    <label for="session-ttl-value" class="control-label">Session TTL (seconds)</label>
    <input type="text" id="session-ttl-value"
           class="form-control" placeholder="ttl in seconds" data-toggle="tooltip" data-container="body"
           data-title="Username can not be empty."/>
    <label for="session-token-ttl" class="control-label">Session Token TTL (seconds)</label>
    <input type="text" id="session-token-ttl"
           class="form-control" placeholder="ttl in seconds" data-toggle="tooltip" data-container="body"
           data-title="Username can not be empty."/>

    <div class="checkbox">
        <label>
            <input type="checkbox" id="enable-session-heartbeat">
            Enable session heartbeat. (if enabled, session while be removed when TTL reached)
        </label>
    </div>
    <label for="session-heartbeat-interval" class="control-label">Session heartbeat interval (seconds)</label>
    <input type="text" id="session-heartbeat-interval"
           class="form-control" placeholder="ttl in seconds" data-toggle="tooltip" data-container="body"
           data-title="Username can not be empty."/>
</div>

<div class="form-group">
    <label for="portal-server-version" class="control-label">Portal Server Version</label>
    <select id="portal-server-version">
        <option>V1</option>
        <option>V2</option>
    </select>
</div>

<div class="form-group">
    <label for="portal-server-listen-port" class="control-label">Portal Server Listen Port</label>
    <input id="portal-server-listen-port"
           class="form-control" placeholder="Listen port"
           data-toggle="tooltip" data-container="body"/>
</div>

<div class="form-group">
    <label for="portal-server-shared-secret" class="control-label">Portal Server Shared secret</label>
    <input id="portal-server-shared-secret"
           class="form-control" placeholder="shared secret"
           data-toggle="tooltip" data-container="body"/>
</div>

<div class="form-group">
    <div class="checkbox">
        <label>
            <input type="checkbox" id="enable-rate-limiting">
            Enable rate limiting.
        </label>
    </div>
</div>

<div class="form-group">
    <div class="form-group">
        <label for="activity-most-recent" class="control-label">Keep activity log for most recent of days</label>
        <input id="activity-most-recent"
               class="form-control" placeholder="most recent days"
               data-toggle="tooltip" data-container="body"/>
    </div>
    <div class="form-group">
        <label for="min-activity-severity" class="control-label">Minimum Activity severity</label>
        <select id="min-activity-severity">
            <option>FATAL</option>
            <option>ERROR</option>
            <option>WARN</option>
            <option>INFO</option>
            <option>DEBUG</option>
            <option>TRACE</option>
        </select>
    </div>
</div>

<div class="form-group">
    <div class="checkbox">
        <label>
            <input type="checkbox" id="enable-cluster">
            Enable cluster.
        </label>
    </div>
</div>

<div class="form-group">
    <label for="cluster-redis-sentinels" class="control-label">REDIS sentinels, if cluster enabled.</label>
    <input id="cluster-redis-sentinels"
           class="form-control" placeholder="REDIS cluster sentinels, ip:port,ip:port"
           data-toggle="tooltip" data-container="body"/>
</div>

<script language="javascript">
    function saveConfiguration(args) {
        $.application.load({
            function: $.portal.configuration.saveConfiguration,
            object: $.portal.configuration,
            args: args
        });
    }

    $('#private-key').change(function () {
        saveConfiguration(['server.private-key', $(this).val() ]);
    });

    $('#server-allow-nat').change(function () {
        saveConfiguration(['nat.allowed', $(this).is(':checked') ]);
    });

    $('#server-check-redirect-url').change(function () {
        saveConfiguration(['server.check-redirect-url', $(this).is(':checked')]);
    });

    $('#enable-session-ttl').change(function () {
        saveConfiguration(['session.ttl.enabled', $(this).is(':checked') ]);
    });

    $('#session-ttl-value').change(function () {
        saveConfiguration(['session.ttl.value', $(this).val() ]);
    });

    $('#session-token-ttl').change(function () {
        saveConfiguration(['session.token.ttl', $(this).val() ]);
    });

    $('#enable-session-heartbeat').change(function () {
        saveConfiguration(['session.heartbeat.enabled', $(this).is(':checked') ]);
    });

    $('#session-heartbeat-interval').change(function () {
        saveConfiguration(['session.heartbeat.interval', $(this).val() ]);
    });

    $('#portal-server-version').change(function () {
        saveConfiguration(['portal-server.protocol.version', $(this).val() ]);
    });

    $('#portal-server-listen-port').change(function () {
        saveConfiguration(['portal-server.listen.port', $(this).val() ]);
    });

    $('#portal-server-shared-secret').change(function () {
        saveConfiguration(['portal-server.shared-secret', $(this).val() ]);
    });

    $('#enable-rate-limiting').change(function () {
        saveConfiguration(['rate-limiting.enabled', $(this).is(':checked') ]);
    });

    $('#activity-most-recent').change(function () {
        saveConfiguration(['activity.most-recent', $(this).val() ]);
    });

    $('#min-activity-severity').change(function () {
        saveConfiguration(['activity.logging.minimum.severity', $(this).val() ]);
    });

    $('#enable-cluster').change(function () {
        saveConfiguration(['cluster.enabled', $(this).is(':checked') ]);
    });

    $('#cluster-redis-sentinels').change(function () {
        saveConfiguration(['cluster.redis.sentinels', $(this).val() ]);
    });

</script>